{
  "{\"sourceRoot\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"filename\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/app.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/app.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/app.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _env = require(\"./env\");\n\nvar _mongodb = require(\"./mongodb\");\n\nvar _https = _interopRequireDefault(require(\"https\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _nodeFetch = _interopRequireDefault(require(\"node-fetch\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// cadastrar chave em https://console.developers.google.com/apis/credentials\nasync function validaToken(token) {\n  const url = `https://oauth2.googleapis.com/tokeninfo?id_token=${token}`;\n  const res = await (0, _nodeFetch.default)(url);\n  const res_json = await res.json();\n  if (res_json['email']) return res_json['email'];else {\n    console.log(res_json);\n  }\n  return false;\n}\n\nconst opcoes = {\n  key: _fs.default.readFileSync(_path.default.resolve(__dirname, '../cert/key.pem')),\n  cert: _fs.default.readFileSync(_path.default.resolve(__dirname, '../cert/cert.pem'))\n};\nconst app = (0, _express.default)();\n\nconst bodyParser = require('body-parser');\n\napp.use(bodyParser.json());\napp.use(_express.default.static(_path.default.resolve(__dirname, '../publico')));\napp.get('/chave', (req, res) => res.json(_env.GOOGLE_CLIENT_ID));\napp.post('/diario/busca', async (req, res) => {\n  const token = req.body.token;\n  const email = await validaToken(token);\n\n  if (email) {\n    const obj = await (0, _mongodb.getEntradas)(email);\n    res.json(obj);\n  } else {\n    res.status(500).send('Something broke!');\n  }\n});\napp.post('/diario/adiciona', async (req, res) => {\n  const token = req.body.token;\n  const data = req.body.data;\n  const entrada = req.body.entrada;\n  console.log(token);\n  const isValid = await validaToken(token); // retorna email do user se valido\n\n  if (isValid) {\n    const userId = isValid;\n    const obj = await (0, _mongodb.addEntrada)(userId, data, entrada);\n    res.json(obj);\n  } else {\n    res.status(500).send('Something broke!');\n  }\n});\n\nconst server = _https.default.createServer(opcoes, app);\n\n(0, _mongodb.setupBDDriver)(); // eslint-disable-next-line no-console\n\nserver.listen(_env.PORTA, () => console.log(`No ar, HTTPS porta ${_env.PORTA}`));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJ2YWxpZGFUb2tlbiIsInRva2VuIiwidXJsIiwicmVzIiwicmVzX2pzb24iLCJqc29uIiwiY29uc29sZSIsImxvZyIsIm9wY29lcyIsImtleSIsImZzIiwicmVhZEZpbGVTeW5jIiwicGF0aCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJjZXJ0IiwiYXBwIiwiYm9keVBhcnNlciIsInJlcXVpcmUiLCJ1c2UiLCJleHByZXNzIiwic3RhdGljIiwiZ2V0IiwicmVxIiwiR09PR0xFX0NMSUVOVF9JRCIsInBvc3QiLCJib2R5IiwiZW1haWwiLCJvYmoiLCJzdGF0dXMiLCJzZW5kIiwiZGF0YSIsImVudHJhZGEiLCJpc1ZhbGlkIiwidXNlcklkIiwic2VydmVyIiwiaHR0cHMiLCJjcmVhdGVTZXJ2ZXIiLCJsaXN0ZW4iLCJQT1JUQSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBO0FBRUEsZUFBZUEsV0FBZixDQUEyQkMsS0FBM0IsRUFBaUM7QUFDL0IsUUFBTUMsR0FBRyxHQUFJLG9EQUFtREQsS0FBTSxFQUF0RTtBQUNBLFFBQU1FLEdBQUcsR0FBRyxNQUFNLHdCQUFNRCxHQUFOLENBQWxCO0FBQ0EsUUFBTUUsUUFBUSxHQUFHLE1BQU1ELEdBQUcsQ0FBQ0UsSUFBSixFQUF2QjtBQUNBLE1BQUlELFFBQVEsQ0FBQyxPQUFELENBQVosRUFDRSxPQUFPQSxRQUFRLENBQUMsT0FBRCxDQUFmLENBREYsS0FFSTtBQUNGRSxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsUUFBWjtBQUNEO0FBQ0QsU0FBTyxLQUFQO0FBQ0Q7O0FBRUQsTUFBTUksTUFBTSxHQUFHO0FBQ2JDLEVBQUFBLEdBQUcsRUFBRUMsWUFBR0MsWUFBSCxDQUFnQkMsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixDQUFoQixDQURRO0FBRWJDLEVBQUFBLElBQUksRUFBRUwsWUFBR0MsWUFBSCxDQUFnQkMsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGtCQUF4QixDQUFoQjtBQUZPLENBQWY7QUFLQSxNQUFNRSxHQUFHLEdBQUcsdUJBQVo7O0FBQ0EsTUFBTUMsVUFBVSxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUExQjs7QUFDQUYsR0FBRyxDQUFDRyxHQUFKLENBQVFGLFVBQVUsQ0FBQ1osSUFBWCxFQUFSO0FBQ0FXLEdBQUcsQ0FBQ0csR0FBSixDQUFRQyxpQkFBUUMsTUFBUixDQUFlVCxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsWUFBeEIsQ0FBZixDQUFSO0FBRUFFLEdBQUcsQ0FBQ00sR0FBSixDQUFRLFFBQVIsRUFBa0IsQ0FBQ0MsR0FBRCxFQUFNcEIsR0FBTixLQUFjQSxHQUFHLENBQUNFLElBQUosQ0FBU21CLHFCQUFULENBQWhDO0FBRUFSLEdBQUcsQ0FBQ1MsSUFBSixDQUFTLGVBQVQsRUFBMEIsT0FBT0YsR0FBUCxFQUFZcEIsR0FBWixLQUFtQjtBQUMzQyxRQUFNRixLQUFLLEdBQUdzQixHQUFHLENBQUNHLElBQUosQ0FBU3pCLEtBQXZCO0FBQ0EsUUFBTTBCLEtBQUssR0FBRyxNQUFNM0IsV0FBVyxDQUFDQyxLQUFELENBQS9COztBQUNBLE1BQUkwQixLQUFKLEVBQVU7QUFDUixVQUFNQyxHQUFHLEdBQUcsTUFBTSwwQkFBWUQsS0FBWixDQUFsQjtBQUNBeEIsSUFBQUEsR0FBRyxDQUFDRSxJQUFKLENBQVN1QixHQUFUO0FBQ0QsR0FIRCxNQUlJO0FBQ0Z6QixJQUFBQSxHQUFHLENBQUMwQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsa0JBQXJCO0FBQ0Q7QUFFRixDQVhEO0FBYUFkLEdBQUcsQ0FBQ1MsSUFBSixDQUFTLGtCQUFULEVBQTZCLE9BQU9GLEdBQVAsRUFBWXBCLEdBQVosS0FBbUI7QUFDOUMsUUFBTUYsS0FBSyxHQUFHc0IsR0FBRyxDQUFDRyxJQUFKLENBQVN6QixLQUF2QjtBQUNBLFFBQU04QixJQUFJLEdBQUdSLEdBQUcsQ0FBQ0csSUFBSixDQUFTSyxJQUF0QjtBQUNBLFFBQU1DLE9BQU8sR0FBR1QsR0FBRyxDQUFDRyxJQUFKLENBQVNNLE9BQXpCO0FBQ0ExQixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWU4sS0FBWjtBQUNBLFFBQU1nQyxPQUFPLEdBQUcsTUFBTWpDLFdBQVcsQ0FBQ0MsS0FBRCxDQUFqQyxDQUw4QyxDQUtMOztBQUN6QyxNQUFJZ0MsT0FBSixFQUFZO0FBQ1YsVUFBTUMsTUFBTSxHQUFHRCxPQUFmO0FBQ0EsVUFBTUwsR0FBRyxHQUFHLE1BQU0seUJBQVdNLE1BQVgsRUFBbUJILElBQW5CLEVBQXlCQyxPQUF6QixDQUFsQjtBQUNBN0IsSUFBQUEsR0FBRyxDQUFDRSxJQUFKLENBQVN1QixHQUFUO0FBQ0QsR0FKRCxNQUtJO0FBQ0Z6QixJQUFBQSxHQUFHLENBQUMwQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsa0JBQXJCO0FBQ0Q7QUFDRixDQWREOztBQWdCQSxNQUFNSyxNQUFNLEdBQUdDLGVBQU1DLFlBQU4sQ0FBbUI3QixNQUFuQixFQUEyQlEsR0FBM0IsQ0FBZjs7QUFDQSw4QixDQUNBOztBQUNBbUIsTUFBTSxDQUFDRyxNQUFQLENBQWNDLFVBQWQsRUFBcUIsTUFBTWpDLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHNCQUFxQmdDLFVBQU0sRUFBeEMsQ0FBM0IiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcmNpYW1hZ3VlcnJvc2tpL3dvcmtwbGFjZXMvaW5lNTY0Ni1hcHAtZGlhcmlvL3NlcnZpZG9yL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQT1JUQSwgR09PR0xFX0NMSUVOVF9JRCB9IGZyb20gJy4vZW52J1xuaW1wb3J0IHsgc2V0dXBCRERyaXZlciwgZ2V0RW50cmFkYXMsIGFkZEVudHJhZGEgfSBmcm9tICcuL21vbmdvZGInXG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnXG5pbXBvcnQgZnMgZnJvbSAnZnMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IGZldGNoIGZyb20gJ25vZGUtZmV0Y2gnXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuXG4vLyBjYWRhc3RyYXIgY2hhdmUgZW0gaHR0cHM6Ly9jb25zb2xlLmRldmVsb3BlcnMuZ29vZ2xlLmNvbS9hcGlzL2NyZWRlbnRpYWxzXG5cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYVRva2VuKHRva2VuKXtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuaW5mbz9pZF90b2tlbj0ke3Rva2VufWBcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKVxuICBjb25zdCByZXNfanNvbiA9IGF3YWl0IHJlcy5qc29uKClcbiAgaWYgKHJlc19qc29uWydlbWFpbCddKVxuICAgIHJldHVybiByZXNfanNvblsnZW1haWwnXVxuICBlbHNle1xuICAgIGNvbnNvbGUubG9nKHJlc19qc29uKVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5jb25zdCBvcGNvZXMgPSB7XG4gIGtleTogZnMucmVhZEZpbGVTeW5jKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9jZXJ0L2tleS5wZW0nKSksXG4gIGNlcnQ6IGZzLnJlYWRGaWxlU3luYyhwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vY2VydC9jZXJ0LnBlbScpKVxufVxuXG5jb25zdCBhcHAgPSBleHByZXNzKClcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vcHVibGljbycpKSlcblxuYXBwLmdldCgnL2NoYXZlJywgKHJlcSwgcmVzKSA9PiByZXMuanNvbihHT09HTEVfQ0xJRU5UX0lEKSlcblxuYXBwLnBvc3QoJy9kaWFyaW8vYnVzY2EnLCBhc3luYyAocmVxLCByZXMpID0+e1xuICBjb25zdCB0b2tlbiA9IHJlcS5ib2R5LnRva2VuXG4gIGNvbnN0IGVtYWlsID0gYXdhaXQgdmFsaWRhVG9rZW4odG9rZW4pXG4gIGlmIChlbWFpbCl7XG4gICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0RW50cmFkYXMoZW1haWwpXG4gICAgcmVzLmpzb24ob2JqKVxuICB9XG4gIGVsc2V7XG4gICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1NvbWV0aGluZyBicm9rZSEnKVxuICB9XG5cbn0pXG5cbmFwcC5wb3N0KCcvZGlhcmlvL2FkaWNpb25hJywgYXN5bmMgKHJlcSwgcmVzKSA9PntcbiAgY29uc3QgdG9rZW4gPSByZXEuYm9keS50b2tlblxuICBjb25zdCBkYXRhID0gcmVxLmJvZHkuZGF0YVxuICBjb25zdCBlbnRyYWRhID0gcmVxLmJvZHkuZW50cmFkYVxuICBjb25zb2xlLmxvZyh0b2tlbilcbiAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHZhbGlkYVRva2VuKHRva2VuKSAvLyByZXRvcm5hIGVtYWlsIGRvIHVzZXIgc2UgdmFsaWRvXG4gIGlmIChpc1ZhbGlkKXtcbiAgICBjb25zdCB1c2VySWQgPSBpc1ZhbGlkXG4gICAgY29uc3Qgb2JqID0gYXdhaXQgYWRkRW50cmFkYSh1c2VySWQsIGRhdGEsIGVudHJhZGEpXG4gICAgcmVzLmpzb24ob2JqKVxuICB9XG4gIGVsc2V7XG4gICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1NvbWV0aGluZyBicm9rZSEnKVxuICB9XG59KVxuXG5jb25zdCBzZXJ2ZXIgPSBodHRwcy5jcmVhdGVTZXJ2ZXIob3Bjb2VzLCBhcHApXG5zZXR1cEJERHJpdmVyKClcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5zZXJ2ZXIubGlzdGVuKFBPUlRBLCAoKSA9PiBjb25zb2xlLmxvZyhgTm8gYXIsIEhUVFBTIHBvcnRhICR7UE9SVEF9YCkpXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "validaToken",
        "token",
        "url",
        "res",
        "res_json",
        "json",
        "console",
        "log",
        "opcoes",
        "key",
        "fs",
        "readFileSync",
        "path",
        "resolve",
        "__dirname",
        "cert",
        "app",
        "bodyParser",
        "require",
        "use",
        "express",
        "static",
        "get",
        "req",
        "GOOGLE_CLIENT_ID",
        "post",
        "body",
        "email",
        "obj",
        "status",
        "send",
        "data",
        "entrada",
        "isValid",
        "userId",
        "server",
        "https",
        "createServer",
        "listen",
        "PORTA"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AAEA,eAAeA,WAAf,CAA2BC,KAA3B,EAAiC;AAC/B,QAAMC,GAAG,GAAI,oDAAmDD,KAAM,EAAtE;AACA,QAAME,GAAG,GAAG,MAAM,wBAAMD,GAAN,CAAlB;AACA,QAAME,QAAQ,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAvB;AACA,MAAID,QAAQ,CAAC,OAAD,CAAZ,EACE,OAAOA,QAAQ,CAAC,OAAD,CAAf,CADF,KAEI;AACFE,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACD;AACD,SAAO,KAAP;AACD;;AAED,MAAMI,MAAM,GAAG;AACbC,EAAAA,GAAG,EAAEC,YAAGC,YAAH,CAAgBC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAhB,CADQ;AAEbC,EAAAA,IAAI,EAAEL,YAAGC,YAAH,CAAgBC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,kBAAxB,CAAhB;AAFO,CAAf;AAKA,MAAME,GAAG,GAAG,uBAAZ;;AACA,MAAMC,UAAU,GAAGC,OAAO,CAAC,aAAD,CAA1B;;AACAF,GAAG,CAACG,GAAJ,CAAQF,UAAU,CAACZ,IAAX,EAAR;AACAW,GAAG,CAACG,GAAJ,CAAQC,iBAAQC,MAAR,CAAeT,cAAKC,OAAL,CAAaC,SAAb,EAAwB,YAAxB,CAAf,CAAR;AAEAE,GAAG,CAACM,GAAJ,CAAQ,QAAR,EAAkB,CAACC,GAAD,EAAMpB,GAAN,KAAcA,GAAG,CAACE,IAAJ,CAASmB,qBAAT,CAAhC;AAEAR,GAAG,CAACS,IAAJ,CAAS,eAAT,EAA0B,OAAOF,GAAP,EAAYpB,GAAZ,KAAmB;AAC3C,QAAMF,KAAK,GAAGsB,GAAG,CAACG,IAAJ,CAASzB,KAAvB;AACA,QAAM0B,KAAK,GAAG,MAAM3B,WAAW,CAACC,KAAD,CAA/B;;AACA,MAAI0B,KAAJ,EAAU;AACR,UAAMC,GAAG,GAAG,MAAM,0BAAYD,KAAZ,CAAlB;AACAxB,IAAAA,GAAG,CAACE,IAAJ,CAASuB,GAAT;AACD,GAHD,MAII;AACFzB,IAAAA,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,kBAArB;AACD;AAEF,CAXD;AAaAd,GAAG,CAACS,IAAJ,CAAS,kBAAT,EAA6B,OAAOF,GAAP,EAAYpB,GAAZ,KAAmB;AAC9C,QAAMF,KAAK,GAAGsB,GAAG,CAACG,IAAJ,CAASzB,KAAvB;AACA,QAAM8B,IAAI,GAAGR,GAAG,CAACG,IAAJ,CAASK,IAAtB;AACA,QAAMC,OAAO,GAAGT,GAAG,CAACG,IAAJ,CAASM,OAAzB;AACA1B,EAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ;AACA,QAAMgC,OAAO,GAAG,MAAMjC,WAAW,CAACC,KAAD,CAAjC,CAL8C,CAKL;;AACzC,MAAIgC,OAAJ,EAAY;AACV,UAAMC,MAAM,GAAGD,OAAf;AACA,UAAML,GAAG,GAAG,MAAM,yBAAWM,MAAX,EAAmBH,IAAnB,EAAyBC,OAAzB,CAAlB;AACA7B,IAAAA,GAAG,CAACE,IAAJ,CAASuB,GAAT;AACD,GAJD,MAKI;AACFzB,IAAAA,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,kBAArB;AACD;AACF,CAdD;;AAgBA,MAAMK,MAAM,GAAGC,eAAMC,YAAN,CAAmB7B,MAAnB,EAA2BQ,GAA3B,CAAf;;AACA,8B,CACA;;AACAmB,MAAM,CAACG,MAAP,CAAcC,UAAd,EAAqB,MAAMjC,OAAO,CAACC,GAAR,CAAa,sBAAqBgC,UAAM,EAAxC,CAA3B",
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "sourcesContent": [
        "import { PORTA, GOOGLE_CLIENT_ID } from './env'\nimport { setupBDDriver, getEntradas, addEntrada } from './mongodb'\nimport https from 'https'\nimport fs from 'fs'\nimport path from 'path'\nimport fetch from 'node-fetch'\nimport express from 'express'\n\n// cadastrar chave em https://console.developers.google.com/apis/credentials\n\nasync function validaToken(token){\n  const url = `https://oauth2.googleapis.com/tokeninfo?id_token=${token}`\n  const res = await fetch(url)\n  const res_json = await res.json()\n  if (res_json['email'])\n    return res_json['email']\n  else{\n    console.log(res_json)\n  }\n  return false\n}\n\nconst opcoes = {\n  key: fs.readFileSync(path.resolve(__dirname, '../cert/key.pem')),\n  cert: fs.readFileSync(path.resolve(__dirname, '../cert/cert.pem'))\n}\n\nconst app = express()\nconst bodyParser = require('body-parser')\napp.use(bodyParser.json())\napp.use(express.static(path.resolve(__dirname, '../publico')))\n\napp.get('/chave', (req, res) => res.json(GOOGLE_CLIENT_ID))\n\napp.post('/diario/busca', async (req, res) =>{\n  const token = req.body.token\n  const email = await validaToken(token)\n  if (email){\n    const obj = await getEntradas(email)\n    res.json(obj)\n  }\n  else{\n    res.status(500).send('Something broke!')\n  }\n\n})\n\napp.post('/diario/adiciona', async (req, res) =>{\n  const token = req.body.token\n  const data = req.body.data\n  const entrada = req.body.entrada\n  console.log(token)\n  const isValid = await validaToken(token) // retorna email do user se valido\n  if (isValid){\n    const userId = isValid\n    const obj = await addEntrada(userId, data, entrada)\n    res.json(obj)\n  }\n  else{\n    res.status(500).send('Something broke!')\n  }\n})\n\nconst server = https.createServer(opcoes, app)\nsetupBDDriver()\n// eslint-disable-next-line no-console\nserver.listen(PORTA, () => console.log(`No ar, HTTPS porta ${PORTA}`))\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1605996621492
  },
  "{\"sourceRoot\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"filename\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GOOGLE_CLIENT_ID = exports.MONGO_URL = exports.PORTA = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\n// verifica se todas as variáveis de ambiente estão definidas\nconst arquivoPontoEnv = _path.default.join(__dirname, '../.env');\n\n_dotenv.default.config({\n  path: arquivoPontoEnv\n});\n\nlet comErro = false;\n\nif (process.env.PORTA === undefined) {\n  console.log('Variável PORTA não definida!. Defina no arquivo servidor/.env');\n  console.log('Exemplo: PORTA=3000');\n  comErro = true;\n}\n\nif (process.env.MONGO_URL === undefined) {\n  console.log('Variável MONGO_URL não definida! Defina no arquivo servidor/.env');\n  comErro = true;\n}\n\nif (process.env.GOOGLE_CLIENT_ID === undefined) {\n  console.log('Variável GOOGLE_CLIENT_ID não definida! Defina no arquivo servidor/.env');\n  console.log('Para obter uma chave acesse https://console.developers.google.com/apis/credentials');\n  comErro = true;\n}\n\nif (comErro) {\n  process.exit(1);\n}\n\nconst PORTA = parseInt(process.env.PORTA);\nexports.PORTA = PORTA;\nconst MONGO_URL = process.env.MONGO_URL;\nexports.MONGO_URL = MONGO_URL;\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nexports.GOOGLE_CLIENT_ID = GOOGLE_CLIENT_ID;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJhcnF1aXZvUG9udG9FbnYiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImRvdGVudiIsImNvbmZpZyIsImNvbUVycm8iLCJwcm9jZXNzIiwiZW52IiwiUE9SVEEiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwibG9nIiwiTU9OR09fVVJMIiwiR09PR0xFX0NMSUVOVF9JRCIsImV4aXQiLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUNBOzs7O0FBSEE7QUFDQTtBQUlBLE1BQU1BLGVBQWUsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQXhCOztBQUNBQyxnQkFBT0MsTUFBUCxDQUFjO0FBQUVKLEVBQUFBLElBQUksRUFBRUQ7QUFBUixDQUFkOztBQUVBLElBQUlNLE9BQU8sR0FBRyxLQUFkOztBQUVBLElBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxLQUFaLEtBQXNCQyxTQUExQixFQUFxQztBQUNuQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksK0RBQVo7QUFDQUQsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkscUJBQVo7QUFDQU4sRUFBQUEsT0FBTyxHQUFHLElBQVY7QUFDRDs7QUFFRCxJQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUssU0FBWixLQUEwQkgsU0FBOUIsRUFBeUM7QUFDdkNDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtFQUFaO0FBQ0FOLEVBQUFBLE9BQU8sR0FBRyxJQUFWO0FBQ0Q7O0FBRUQsSUFBSUMsT0FBTyxDQUFDQyxHQUFSLENBQVlNLGdCQUFaLEtBQWlDSixTQUFyQyxFQUFnRDtBQUM5Q0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkseUVBQVo7QUFDQUQsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksb0ZBQVo7QUFDQU4sRUFBQUEsT0FBTyxHQUFHLElBQVY7QUFDRDs7QUFFRCxJQUFJQSxPQUFKLEVBQWE7QUFDWEMsRUFBQUEsT0FBTyxDQUFDUSxJQUFSLENBQWEsQ0FBYjtBQUNEOztBQUVELE1BQU1OLEtBQUssR0FBR08sUUFBUSxDQUFDVCxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsS0FBYixDQUF0Qjs7QUFDQSxNQUFNSSxTQUFTLEdBQUdOLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxTQUE5Qjs7QUFDQSxNQUFNQyxnQkFBZ0IsR0FBR1AsT0FBTyxDQUFDQyxHQUFSLENBQVlNLGdCQUFyQyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyY2lhbWFndWVycm9za2kvd29ya3BsYWNlcy9pbmU1NjQ2LWFwcC1kaWFyaW8vc2Vydmlkb3Ivc3JjLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8vIHZlcmlmaWNhIHNlIHRvZGFzIGFzIHZhcmnDoXZlaXMgZGUgYW1iaWVudGUgZXN0w6NvIGRlZmluaWRhc1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52J1xuXG5jb25zdCBhcnF1aXZvUG9udG9FbnYgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLmVudicpXG5kb3RlbnYuY29uZmlnKHsgcGF0aDogYXJxdWl2b1BvbnRvRW52IH0pXG5cbmxldCBjb21FcnJvID0gZmFsc2VcblxuaWYgKHByb2Nlc3MuZW52LlBPUlRBID09PSB1bmRlZmluZWQpIHtcbiAgY29uc29sZS5sb2coJ1ZhcmnDoXZlbCBQT1JUQSBuw6NvIGRlZmluaWRhIS4gRGVmaW5hIG5vIGFycXVpdm8gc2Vydmlkb3IvLmVudicpXG4gIGNvbnNvbGUubG9nKCdFeGVtcGxvOiBQT1JUQT0zMDAwJylcbiAgY29tRXJybyA9IHRydWVcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk1PTkdPX1VSTCA9PT0gdW5kZWZpbmVkKSB7XG4gIGNvbnNvbGUubG9nKCdWYXJpw6F2ZWwgTU9OR09fVVJMIG7Do28gZGVmaW5pZGEhIERlZmluYSBubyBhcnF1aXZvIHNlcnZpZG9yLy5lbnYnKVxuICBjb21FcnJvID0gdHJ1ZVxufVxuXG5pZiAocHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCA9PT0gdW5kZWZpbmVkKSB7XG4gIGNvbnNvbGUubG9nKCdWYXJpw6F2ZWwgR09PR0xFX0NMSUVOVF9JRCBuw6NvIGRlZmluaWRhISBEZWZpbmEgbm8gYXJxdWl2byBzZXJ2aWRvci8uZW52JylcbiAgY29uc29sZS5sb2coJ1BhcmEgb2J0ZXIgdW1hIGNoYXZlIGFjZXNzZSBodHRwczovL2NvbnNvbGUuZGV2ZWxvcGVycy5nb29nbGUuY29tL2FwaXMvY3JlZGVudGlhbHMnKVxuICBjb21FcnJvID0gdHJ1ZVxufVxuXG5pZiAoY29tRXJybykge1xuICBwcm9jZXNzLmV4aXQoMSlcbn1cblxuY29uc3QgUE9SVEEgPSBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUQSlcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTFxuY29uc3QgR09PR0xFX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSURcbmV4cG9ydCB7IFBPUlRBLCBNT05HT19VUkwsIEdPT0dMRV9DTElFTlRfSUR9XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "arquivoPontoEnv",
        "path",
        "join",
        "__dirname",
        "dotenv",
        "config",
        "comErro",
        "process",
        "env",
        "PORTA",
        "undefined",
        "console",
        "log",
        "MONGO_URL",
        "GOOGLE_CLIENT_ID",
        "exit",
        "parseInt"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;;;AAHA;AACA;AAIA,MAAMA,eAAe,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAxB;;AACAC,gBAAOC,MAAP,CAAc;AAAEJ,EAAAA,IAAI,EAAED;AAAR,CAAd;;AAEA,IAAIM,OAAO,GAAG,KAAd;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,KAAZ,KAAsBC,SAA1B,EAAqC;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAY,+DAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAN,EAAAA,OAAO,GAAG,IAAV;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYK,SAAZ,KAA0BH,SAA9B,EAAyC;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,kEAAZ;AACAN,EAAAA,OAAO,GAAG,IAAV;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYM,gBAAZ,KAAiCJ,SAArC,EAAgD;AAC9CC,EAAAA,OAAO,CAACC,GAAR,CAAY,yEAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,oFAAZ;AACAN,EAAAA,OAAO,GAAG,IAAV;AACD;;AAED,IAAIA,OAAJ,EAAa;AACXC,EAAAA,OAAO,CAACQ,IAAR,CAAa,CAAb;AACD;;AAED,MAAMN,KAAK,GAAGO,QAAQ,CAACT,OAAO,CAACC,GAAR,CAAYC,KAAb,CAAtB;;AACA,MAAMI,SAAS,GAAGN,OAAO,CAACC,GAAR,CAAYK,SAA9B;;AACA,MAAMC,gBAAgB,GAAGP,OAAO,CAACC,GAAR,CAAYM,gBAArC",
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "sourcesContent": [
        "/* eslint-disable no-console */\n// verifica se todas as variáveis de ambiente estão definidas\nimport path from 'path'\nimport dotenv from 'dotenv'\n\nconst arquivoPontoEnv = path.join(__dirname, '../.env')\ndotenv.config({ path: arquivoPontoEnv })\n\nlet comErro = false\n\nif (process.env.PORTA === undefined) {\n  console.log('Variável PORTA não definida!. Defina no arquivo servidor/.env')\n  console.log('Exemplo: PORTA=3000')\n  comErro = true\n}\n\nif (process.env.MONGO_URL === undefined) {\n  console.log('Variável MONGO_URL não definida! Defina no arquivo servidor/.env')\n  comErro = true\n}\n\nif (process.env.GOOGLE_CLIENT_ID === undefined) {\n  console.log('Variável GOOGLE_CLIENT_ID não definida! Defina no arquivo servidor/.env')\n  console.log('Para obter uma chave acesse https://console.developers.google.com/apis/credentials')\n  comErro = true\n}\n\nif (comErro) {\n  process.exit(1)\n}\n\nconst PORTA = parseInt(process.env.PORTA)\nconst MONGO_URL = process.env.MONGO_URL\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID\nexport { PORTA, MONGO_URL, GOOGLE_CLIENT_ID}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1605994888538
  },
  "{\"sourceRoot\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"filename\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
        "sourceFileName": "mongodb.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupBDDriver = setupBDDriver;\nexports.getEntradas = getEntradas;\nexports.getEntrada = getEntrada;\nexports.addEntrada = addEntrada;\n\nvar _env = require(\"./env\");\n\n// versão alternativa usando async/await -- RECOMENDADO\nconst {\n  MongoClient\n} = require('mongodb');\n\nvar DBDriver = new MongoClient(_env.MONGO_URL, {\n  useUnifiedTopology: true\n}); // declaramos funções assíncronas com async \n// token é o identificador do usuário\n\nasync function addEntrada(userId, data, entrada) {\n  const collection = DBDriver.collection('diario');\n  const query = {\n    userId: userId,\n    data: data\n  };\n  const doc = {\n    userId: userId,\n    data: data,\n    conteudo: entrada\n  }; // toda promise é precedida de um await - bloqueia a execução dessa função até ser completada\n  // upsert = update ou insert\n\n  const res = await collection.updateOne(query, {\n    $set: doc\n  }, {\n    upsert: true\n  });\n  return res;\n}\n\nasync function getEntrada(userId, data) {\n  const collection = DBDriver.collection('diario');\n  const query = {\n    userId: userId,\n    data: data\n  };\n  const res = await collection.findOne(query);\n  return res;\n}\n\nasync function getEntradas() {\n  const collection = DBDriver.collection('diario'); // FIX ME: retornar somente entradas do usuário ativo\n\n  const entradas = await collection.find().toArray();\n  return entradas;\n}\n\nasync function setupBDDriver() {\n  DBDriver.connect((err, conn) => {\n    if (err) {\n      console.dir(err);\n    }\n\n    DBDriver = conn.db('INE5646');\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vbmdvZGIuanMiXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJyZXF1aXJlIiwiREJEcml2ZXIiLCJNT05HT19VUkwiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJhZGRFbnRyYWRhIiwidXNlcklkIiwiZGF0YSIsImVudHJhZGEiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJkb2MiLCJjb250ZXVkbyIsInJlcyIsInVwZGF0ZU9uZSIsIiRzZXQiLCJ1cHNlcnQiLCJnZXRFbnRyYWRhIiwiZmluZE9uZSIsImdldEVudHJhZGFzIiwiZW50cmFkYXMiLCJmaW5kIiwidG9BcnJheSIsInNldHVwQkREcml2ZXIiLCJjb25uZWN0IiwiZXJyIiwiY29ubiIsImNvbnNvbGUiLCJkaXIiLCJkYiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOztBQUVBO0FBQ0EsTUFBTTtBQUFDQSxFQUFBQTtBQUFELElBQWdCQyxPQUFPLENBQUMsU0FBRCxDQUE3Qjs7QUFDQSxJQUFJQyxRQUFRLEdBQUcsSUFBSUYsV0FBSixDQUFnQkcsY0FBaEIsRUFBMkI7QUFBQ0MsRUFBQUEsa0JBQWtCLEVBQUU7QUFBckIsQ0FBM0IsQ0FBZixDLENBRUE7QUFDQTs7QUFDQSxlQUFlQyxVQUFmLENBQTBCQyxNQUExQixFQUFrQ0MsSUFBbEMsRUFBd0NDLE9BQXhDLEVBQWdEO0FBQzlDLFFBQU1DLFVBQVUsR0FBR1AsUUFBUSxDQUFDTyxVQUFULENBQW9CLFFBQXBCLENBQW5CO0FBQ0EsUUFBTUMsS0FBSyxHQUFHO0FBQUVKLElBQUFBLE1BQU0sRUFBRUEsTUFBVjtBQUFrQkMsSUFBQUEsSUFBSSxFQUFFQTtBQUF4QixHQUFkO0FBQ0EsUUFBTUksR0FBRyxHQUFHO0FBQ1ZMLElBQUFBLE1BQU0sRUFBRUEsTUFERTtBQUVWQyxJQUFBQSxJQUFJLEVBQUVBLElBRkk7QUFHVkssSUFBQUEsUUFBUSxFQUFFSjtBQUhBLEdBQVosQ0FIOEMsQ0FROUM7QUFDQTs7QUFDQSxRQUFNSyxHQUFHLEdBQUcsTUFBTUosVUFBVSxDQUFDSyxTQUFYLENBQXFCSixLQUFyQixFQUE0QjtBQUFFSyxJQUFBQSxJQUFJLEVBQUVKO0FBQVIsR0FBNUIsRUFBMkM7QUFBQ0ssSUFBQUEsTUFBTSxFQUFFO0FBQVQsR0FBM0MsQ0FBbEI7QUFDQSxTQUFPSCxHQUFQO0FBQ0Q7O0FBRUQsZUFBZUksVUFBZixDQUEwQlgsTUFBMUIsRUFBa0NDLElBQWxDLEVBQXVDO0FBQ3JDLFFBQU1FLFVBQVUsR0FBR1AsUUFBUSxDQUFDTyxVQUFULENBQW9CLFFBQXBCLENBQW5CO0FBRUEsUUFBTUMsS0FBSyxHQUFHO0FBQUNKLElBQUFBLE1BQU0sRUFBRUEsTUFBVDtBQUFpQkMsSUFBQUEsSUFBSSxFQUFFQTtBQUF2QixHQUFkO0FBQ0EsUUFBTU0sR0FBRyxHQUFHLE1BQU1KLFVBQVUsQ0FBQ1MsT0FBWCxDQUFtQlIsS0FBbkIsQ0FBbEI7QUFFQSxTQUFPRyxHQUFQO0FBQ0Q7O0FBRUQsZUFBZU0sV0FBZixHQUE0QjtBQUMxQixRQUFNVixVQUFVLEdBQUdQLFFBQVEsQ0FBQ08sVUFBVCxDQUFvQixRQUFwQixDQUFuQixDQUQwQixDQUcxQjs7QUFFQSxRQUFNVyxRQUFRLEdBQUcsTUFBTVgsVUFBVSxDQUFDWSxJQUFYLEdBQWtCQyxPQUFsQixFQUF2QjtBQUNBLFNBQU9GLFFBQVA7QUFDRDs7QUFFRCxlQUFlRyxhQUFmLEdBQThCO0FBQzVCckIsRUFBQUEsUUFBUSxDQUFDc0IsT0FBVCxDQUFpQixDQUFDQyxHQUFELEVBQU1DLElBQU4sS0FBZTtBQUM5QixRQUFHRCxHQUFILEVBQU87QUFDTEUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlILEdBQVo7QUFDRDs7QUFDRHZCLElBQUFBLFFBQVEsR0FBR3dCLElBQUksQ0FBQ0csRUFBTCxDQUFRLFNBQVIsQ0FBWDtBQUNELEdBTEQ7QUFNRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyY2lhbWFndWVycm9za2kvd29ya3BsYWNlcy9pbmU1NjQ2LWFwcC1kaWFyaW8vc2Vydmlkb3Ivc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1PTkdPX1VSTCB9IGZyb20gJy4vZW52J1xuXG4vLyB2ZXJzw6NvIGFsdGVybmF0aXZhIHVzYW5kbyBhc3luYy9hd2FpdCAtLSBSRUNPTUVOREFET1xuY29uc3Qge01vbmdvQ2xpZW50fSA9IHJlcXVpcmUoJ21vbmdvZGInKVxudmFyIERCRHJpdmVyID0gbmV3IE1vbmdvQ2xpZW50KE1PTkdPX1VSTCwge3VzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZX0pXG5cbi8vIGRlY2xhcmFtb3MgZnVuw6fDtWVzIGFzc8OtbmNyb25hcyBjb20gYXN5bmMgXG4vLyB0b2tlbiDDqSBvIGlkZW50aWZpY2Fkb3IgZG8gdXN1w6FyaW9cbmFzeW5jIGZ1bmN0aW9uIGFkZEVudHJhZGEodXNlcklkLCBkYXRhLCBlbnRyYWRhKXtcbiAgY29uc3QgY29sbGVjdGlvbiA9IERCRHJpdmVyLmNvbGxlY3Rpb24oJ2RpYXJpbycpXG4gIGNvbnN0IHF1ZXJ5ID0geyB1c2VySWQ6IHVzZXJJZCwgZGF0YTogZGF0YSB9XG4gIGNvbnN0IGRvYyA9IHtcbiAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICBkYXRhOiBkYXRhLFxuICAgIGNvbnRldWRvOiBlbnRyYWRhXG4gIH1cbiAgLy8gdG9kYSBwcm9taXNlIMOpIHByZWNlZGlkYSBkZSB1bSBhd2FpdCAtIGJsb3F1ZWlhIGEgZXhlY3XDp8OjbyBkZXNzYSBmdW7Dp8OjbyBhdMOpIHNlciBjb21wbGV0YWRhXG4gIC8vIHVwc2VydCA9IHVwZGF0ZSBvdSBpbnNlcnRcbiAgY29uc3QgcmVzID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUocXVlcnksIHsgJHNldDogZG9jIH0sIHt1cHNlcnQ6IHRydWV9KSAgXG4gIHJldHVybiByZXNcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0RW50cmFkYSh1c2VySWQsIGRhdGEpe1xuICBjb25zdCBjb2xsZWN0aW9uID0gREJEcml2ZXIuY29sbGVjdGlvbignZGlhcmlvJylcblxuICBjb25zdCBxdWVyeSA9IHt1c2VySWQ6IHVzZXJJZCwgZGF0YTogZGF0YX1cbiAgY29uc3QgcmVzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHF1ZXJ5KSBcbiAgIFxuICByZXR1cm4gcmVzXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEVudHJhZGFzKCl7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBEQkRyaXZlci5jb2xsZWN0aW9uKCdkaWFyaW8nKVxuICBcbiAgLy8gRklYIE1FOiByZXRvcm5hciBzb21lbnRlIGVudHJhZGFzIGRvIHVzdcOhcmlvIGF0aXZvXG5cbiAgY29uc3QgZW50cmFkYXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoKS50b0FycmF5KClcbiAgcmV0dXJuIGVudHJhZGFzXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldHVwQkREcml2ZXIoKXtcbiAgREJEcml2ZXIuY29ubmVjdCgoZXJyLCBjb25uKSA9PiB7XG4gICAgaWYoZXJyKXtcbiAgICAgIGNvbnNvbGUuZGlyKGVycilcbiAgICB9XG4gICAgREJEcml2ZXIgPSBjb25uLmRiKCdJTkU1NjQ2JylcbiAgfSlcbn1cblxuZXhwb3J0IHtzZXR1cEJERHJpdmVyLCBnZXRFbnRyYWRhcywgZ2V0RW50cmFkYSwgYWRkRW50cmFkYX1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "mongodb.js"
      ],
      "names": [
        "MongoClient",
        "require",
        "DBDriver",
        "MONGO_URL",
        "useUnifiedTopology",
        "addEntrada",
        "userId",
        "data",
        "entrada",
        "collection",
        "query",
        "doc",
        "conteudo",
        "res",
        "updateOne",
        "$set",
        "upsert",
        "getEntrada",
        "findOne",
        "getEntradas",
        "entradas",
        "find",
        "toArray",
        "setupBDDriver",
        "connect",
        "err",
        "conn",
        "console",
        "dir",
        "db"
      ],
      "mappings": ";;;;;;;;;;AAAA;;AAEA;AACA,MAAM;AAACA,EAAAA;AAAD,IAAgBC,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAIC,QAAQ,GAAG,IAAIF,WAAJ,CAAgBG,cAAhB,EAA2B;AAACC,EAAAA,kBAAkB,EAAE;AAArB,CAA3B,CAAf,C,CAEA;AACA;;AACA,eAAeC,UAAf,CAA0BC,MAA1B,EAAkCC,IAAlC,EAAwCC,OAAxC,EAAgD;AAC9C,QAAMC,UAAU,GAAGP,QAAQ,CAACO,UAAT,CAAoB,QAApB,CAAnB;AACA,QAAMC,KAAK,GAAG;AAAEJ,IAAAA,MAAM,EAAEA,MAAV;AAAkBC,IAAAA,IAAI,EAAEA;AAAxB,GAAd;AACA,QAAMI,GAAG,GAAG;AACVL,IAAAA,MAAM,EAAEA,MADE;AAEVC,IAAAA,IAAI,EAAEA,IAFI;AAGVK,IAAAA,QAAQ,EAAEJ;AAHA,GAAZ,CAH8C,CAQ9C;AACA;;AACA,QAAMK,GAAG,GAAG,MAAMJ,UAAU,CAACK,SAAX,CAAqBJ,KAArB,EAA4B;AAAEK,IAAAA,IAAI,EAAEJ;AAAR,GAA5B,EAA2C;AAACK,IAAAA,MAAM,EAAE;AAAT,GAA3C,CAAlB;AACA,SAAOH,GAAP;AACD;;AAED,eAAeI,UAAf,CAA0BX,MAA1B,EAAkCC,IAAlC,EAAuC;AACrC,QAAME,UAAU,GAAGP,QAAQ,CAACO,UAAT,CAAoB,QAApB,CAAnB;AAEA,QAAMC,KAAK,GAAG;AAACJ,IAAAA,MAAM,EAAEA,MAAT;AAAiBC,IAAAA,IAAI,EAAEA;AAAvB,GAAd;AACA,QAAMM,GAAG,GAAG,MAAMJ,UAAU,CAACS,OAAX,CAAmBR,KAAnB,CAAlB;AAEA,SAAOG,GAAP;AACD;;AAED,eAAeM,WAAf,GAA4B;AAC1B,QAAMV,UAAU,GAAGP,QAAQ,CAACO,UAAT,CAAoB,QAApB,CAAnB,CAD0B,CAG1B;;AAEA,QAAMW,QAAQ,GAAG,MAAMX,UAAU,CAACY,IAAX,GAAkBC,OAAlB,EAAvB;AACA,SAAOF,QAAP;AACD;;AAED,eAAeG,aAAf,GAA8B;AAC5BrB,EAAAA,QAAQ,CAACsB,OAAT,CAAiB,CAACC,GAAD,EAAMC,IAAN,KAAe;AAC9B,QAAGD,GAAH,EAAO;AACLE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD;;AACDvB,IAAAA,QAAQ,GAAGwB,IAAI,CAACG,EAAL,CAAQ,SAAR,CAAX;AACD,GALD;AAMD",
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "sourcesContent": [
        "import { MONGO_URL } from './env'\n\n// versão alternativa usando async/await -- RECOMENDADO\nconst {MongoClient} = require('mongodb')\nvar DBDriver = new MongoClient(MONGO_URL, {useUnifiedTopology: true})\n\n// declaramos funções assíncronas com async \n// token é o identificador do usuário\nasync function addEntrada(userId, data, entrada){\n  const collection = DBDriver.collection('diario')\n  const query = { userId: userId, data: data }\n  const doc = {\n    userId: userId,\n    data: data,\n    conteudo: entrada\n  }\n  // toda promise é precedida de um await - bloqueia a execução dessa função até ser completada\n  // upsert = update ou insert\n  const res = await collection.updateOne(query, { $set: doc }, {upsert: true})  \n  return res\n}\n\nasync function getEntrada(userId, data){\n  const collection = DBDriver.collection('diario')\n\n  const query = {userId: userId, data: data}\n  const res = await collection.findOne(query) \n   \n  return res\n}\n\nasync function getEntradas(){\n  const collection = DBDriver.collection('diario')\n  \n  // FIX ME: retornar somente entradas do usuário ativo\n\n  const entradas = await collection.find().toArray()\n  return entradas\n}\n\nasync function setupBDDriver(){\n  DBDriver.connect((err, conn) => {\n    if(err){\n      console.dir(err)\n    }\n    DBDriver = conn.db('INE5646')\n  })\n}\n\nexport {setupBDDriver, getEntradas, getEntrada, addEntrada}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1605994888539
  },
  "{\"sourceRoot\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"filename\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GOOGLE_CLIENT_ID = exports.MONGO_URL = exports.PORTA = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\n// verifica se todas as variáveis de ambiente estão definidas\nconst arquivoPontoEnv = _path.default.join(__dirname, '../.env');\n\n_dotenv.default.config({\n  path: arquivoPontoEnv\n});\n\nlet comErro = false;\n\nif (process.env.PORTA === undefined) {\n  console.log('Variável PORTA não definida!. Defina no arquivo servidor/.env');\n  console.log('Exemplo: PORTA=3000');\n  comErro = true;\n}\n\nif (process.env.MONGO_URL === undefined) {\n  console.log('Variável MONGO_URL não definida! Defina no arquivo servidor/.env');\n  comErro = true;\n}\n\nif (process.env.GOOGLE_CLIENT_ID === undefined) {\n  console.log('Variável GOOGLE_CLIENT_ID não definida! Defina no arquivo servidor/.env');\n  console.log('Para obter uma chave acesse https://console.developers.google.com/apis/credentials');\n  comErro = true;\n}\n\nif (comErro) {\n  process.exit(1);\n}\n\nconst PORTA = parseInt(process.env.PORTA);\nexports.PORTA = PORTA;\nconst MONGO_URL = process.env.MONGO_URL;\nexports.MONGO_URL = MONGO_URL;\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nexports.GOOGLE_CLIENT_ID = GOOGLE_CLIENT_ID;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJhcnF1aXZvUG9udG9FbnYiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImRvdGVudiIsImNvbmZpZyIsImNvbUVycm8iLCJwcm9jZXNzIiwiZW52IiwiUE9SVEEiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwibG9nIiwiTU9OR09fVVJMIiwiR09PR0xFX0NMSUVOVF9JRCIsImV4aXQiLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUNBOzs7O0FBSEE7QUFDQTtBQUlBLE1BQU1BLGVBQWUsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQXhCOztBQUNBQyxnQkFBT0MsTUFBUCxDQUFjO0FBQUVKLEVBQUFBLElBQUksRUFBRUQ7QUFBUixDQUFkOztBQUVBLElBQUlNLE9BQU8sR0FBRyxLQUFkOztBQUVBLElBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxLQUFaLEtBQXNCQyxTQUExQixFQUFxQztBQUNuQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksK0RBQVo7QUFDQUQsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkscUJBQVo7QUFDQU4sRUFBQUEsT0FBTyxHQUFHLElBQVY7QUFDRDs7QUFFRCxJQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUssU0FBWixLQUEwQkgsU0FBOUIsRUFBeUM7QUFDdkNDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtFQUFaO0FBQ0FOLEVBQUFBLE9BQU8sR0FBRyxJQUFWO0FBQ0Q7O0FBRUQsSUFBSUMsT0FBTyxDQUFDQyxHQUFSLENBQVlNLGdCQUFaLEtBQWlDSixTQUFyQyxFQUFnRDtBQUM5Q0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkseUVBQVo7QUFDQUQsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksb0ZBQVo7QUFDQU4sRUFBQUEsT0FBTyxHQUFHLElBQVY7QUFDRDs7QUFFRCxJQUFJQSxPQUFKLEVBQWE7QUFDWEMsRUFBQUEsT0FBTyxDQUFDUSxJQUFSLENBQWEsQ0FBYjtBQUNEOztBQUVELE1BQU1OLEtBQUssR0FBR08sUUFBUSxDQUFDVCxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsS0FBYixDQUF0Qjs7QUFDQSxNQUFNSSxTQUFTLEdBQUdOLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxTQUE5Qjs7QUFDQSxNQUFNQyxnQkFBZ0IsR0FBR1AsT0FBTyxDQUFDQyxHQUFSLENBQVlNLGdCQUFyQyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyY2lhbWFndWVycm9za2kvd29ya3BsYWNlcy9pbmU1NjQ2LWFwcC1kaWFyaW8vc2Vydmlkb3Ivc3JjLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8vIHZlcmlmaWNhIHNlIHRvZGFzIGFzIHZhcmnDoXZlaXMgZGUgYW1iaWVudGUgZXN0w6NvIGRlZmluaWRhc1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52J1xuXG5jb25zdCBhcnF1aXZvUG9udG9FbnYgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLmVudicpXG5kb3RlbnYuY29uZmlnKHsgcGF0aDogYXJxdWl2b1BvbnRvRW52IH0pXG5cbmxldCBjb21FcnJvID0gZmFsc2VcblxuaWYgKHByb2Nlc3MuZW52LlBPUlRBID09PSB1bmRlZmluZWQpIHtcbiAgY29uc29sZS5sb2coJ1ZhcmnDoXZlbCBQT1JUQSBuw6NvIGRlZmluaWRhIS4gRGVmaW5hIG5vIGFycXVpdm8gc2Vydmlkb3IvLmVudicpXG4gIGNvbnNvbGUubG9nKCdFeGVtcGxvOiBQT1JUQT0zMDAwJylcbiAgY29tRXJybyA9IHRydWVcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk1PTkdPX1VSTCA9PT0gdW5kZWZpbmVkKSB7XG4gIGNvbnNvbGUubG9nKCdWYXJpw6F2ZWwgTU9OR09fVVJMIG7Do28gZGVmaW5pZGEhIERlZmluYSBubyBhcnF1aXZvIHNlcnZpZG9yLy5lbnYnKVxuICBjb21FcnJvID0gdHJ1ZVxufVxuXG5pZiAocHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCA9PT0gdW5kZWZpbmVkKSB7XG4gIGNvbnNvbGUubG9nKCdWYXJpw6F2ZWwgR09PR0xFX0NMSUVOVF9JRCBuw6NvIGRlZmluaWRhISBEZWZpbmEgbm8gYXJxdWl2byBzZXJ2aWRvci8uZW52JylcbiAgY29uc29sZS5sb2coJ1BhcmEgb2J0ZXIgdW1hIGNoYXZlIGFjZXNzZSBodHRwczovL2NvbnNvbGUuZGV2ZWxvcGVycy5nb29nbGUuY29tL2FwaXMvY3JlZGVudGlhbHMnKVxuICBjb21FcnJvID0gdHJ1ZVxufVxuXG5pZiAoY29tRXJybykge1xuICBwcm9jZXNzLmV4aXQoMSlcbn1cblxuY29uc3QgUE9SVEEgPSBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUQSlcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTFxuY29uc3QgR09PR0xFX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSURcbmV4cG9ydCB7IFBPUlRBLCBNT05HT19VUkwsIEdPT0dMRV9DTElFTlRfSUR9XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "arquivoPontoEnv",
        "path",
        "join",
        "__dirname",
        "dotenv",
        "config",
        "comErro",
        "process",
        "env",
        "PORTA",
        "undefined",
        "console",
        "log",
        "MONGO_URL",
        "GOOGLE_CLIENT_ID",
        "exit",
        "parseInt"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;;;AAHA;AACA;AAIA,MAAMA,eAAe,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAxB;;AACAC,gBAAOC,MAAP,CAAc;AAAEJ,EAAAA,IAAI,EAAED;AAAR,CAAd;;AAEA,IAAIM,OAAO,GAAG,KAAd;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,KAAZ,KAAsBC,SAA1B,EAAqC;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAY,+DAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAN,EAAAA,OAAO,GAAG,IAAV;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYK,SAAZ,KAA0BH,SAA9B,EAAyC;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,kEAAZ;AACAN,EAAAA,OAAO,GAAG,IAAV;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYM,gBAAZ,KAAiCJ,SAArC,EAAgD;AAC9CC,EAAAA,OAAO,CAACC,GAAR,CAAY,yEAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,oFAAZ;AACAN,EAAAA,OAAO,GAAG,IAAV;AACD;;AAED,IAAIA,OAAJ,EAAa;AACXC,EAAAA,OAAO,CAACQ,IAAR,CAAa,CAAb;AACD;;AAED,MAAMN,KAAK,GAAGO,QAAQ,CAACT,OAAO,CAACC,GAAR,CAAYC,KAAb,CAAtB;;AACA,MAAMI,SAAS,GAAGN,OAAO,CAACC,GAAR,CAAYK,SAA9B;;AACA,MAAMC,gBAAgB,GAAGP,OAAO,CAACC,GAAR,CAAYM,gBAArC",
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "sourcesContent": [
        "/* eslint-disable no-console */\n// verifica se todas as variáveis de ambiente estão definidas\nimport path from 'path'\nimport dotenv from 'dotenv'\n\nconst arquivoPontoEnv = path.join(__dirname, '../.env')\ndotenv.config({ path: arquivoPontoEnv })\n\nlet comErro = false\n\nif (process.env.PORTA === undefined) {\n  console.log('Variável PORTA não definida!. Defina no arquivo servidor/.env')\n  console.log('Exemplo: PORTA=3000')\n  comErro = true\n}\n\nif (process.env.MONGO_URL === undefined) {\n  console.log('Variável MONGO_URL não definida! Defina no arquivo servidor/.env')\n  comErro = true\n}\n\nif (process.env.GOOGLE_CLIENT_ID === undefined) {\n  console.log('Variável GOOGLE_CLIENT_ID não definida! Defina no arquivo servidor/.env')\n  console.log('Para obter uma chave acesse https://console.developers.google.com/apis/credentials')\n  comErro = true\n}\n\nif (comErro) {\n  process.exit(1)\n}\n\nconst PORTA = parseInt(process.env.PORTA)\nconst MONGO_URL = process.env.MONGO_URL\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID\nexport { PORTA, MONGO_URL, GOOGLE_CLIENT_ID}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1605994888538
  },
  "{\"sourceRoot\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"filename\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/mongodb.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
        "sourceFileName": "mongodb.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupBDDriver = setupBDDriver;\nexports.getEntradas = getEntradas;\nexports.getEntrada = getEntrada;\nexports.addEntrada = addEntrada;\n\nvar _env = require(\"./env\");\n\n// versão alternativa usando async/await -- RECOMENDADO\nconst {\n  MongoClient\n} = require('mongodb');\n\nvar DBDriver = new MongoClient(_env.MONGO_URL, {\n  useUnifiedTopology: true\n}); // declaramos funções assíncronas com async \n// token é o identificador do usuário\n\nasync function addEntrada(userId, data, entrada) {\n  const collection = DBDriver.collection('diario');\n  const query = {\n    userId: userId,\n    data: data\n  };\n  const doc = {\n    userId: userId,\n    data: data,\n    conteudo: entrada\n  }; // toda promise é precedida de um await - bloqueia a execução dessa função até ser completada\n  // upsert = update ou insert\n\n  const res = await collection.updateOne(query, {\n    $set: doc\n  }, {\n    upsert: true\n  });\n  return res;\n}\n\nasync function getEntrada(userId, data) {\n  const collection = DBDriver.collection('diario');\n  const query = {\n    userId: userId,\n    data: data\n  };\n  const res = await collection.findOne(query);\n  return res;\n}\n\nasync function getEntradas(email) {\n  const collection = DBDriver.collection('diario');\n  const entradas = await collection.find({\n    userId: email\n  }).toArray();\n  return entradas;\n}\n\nasync function setupBDDriver() {\n  DBDriver.connect((err, conn) => {\n    if (err) {\n      console.dir(err);\n    }\n\n    DBDriver = conn.db('INE5646');\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vbmdvZGIuanMiXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJyZXF1aXJlIiwiREJEcml2ZXIiLCJNT05HT19VUkwiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJhZGRFbnRyYWRhIiwidXNlcklkIiwiZGF0YSIsImVudHJhZGEiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJkb2MiLCJjb250ZXVkbyIsInJlcyIsInVwZGF0ZU9uZSIsIiRzZXQiLCJ1cHNlcnQiLCJnZXRFbnRyYWRhIiwiZmluZE9uZSIsImdldEVudHJhZGFzIiwiZW1haWwiLCJlbnRyYWRhcyIsImZpbmQiLCJ0b0FycmF5Iiwic2V0dXBCRERyaXZlciIsImNvbm5lY3QiLCJlcnIiLCJjb25uIiwiY29uc29sZSIsImRpciIsImRiIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7O0FBRUE7QUFDQSxNQUFNO0FBQUNBLEVBQUFBO0FBQUQsSUFBZ0JDLE9BQU8sQ0FBQyxTQUFELENBQTdCOztBQUNBLElBQUlDLFFBQVEsR0FBRyxJQUFJRixXQUFKLENBQWdCRyxjQUFoQixFQUEyQjtBQUFDQyxFQUFBQSxrQkFBa0IsRUFBRTtBQUFyQixDQUEzQixDQUFmLEMsQ0FFQTtBQUNBOztBQUNBLGVBQWVDLFVBQWYsQ0FBMEJDLE1BQTFCLEVBQWtDQyxJQUFsQyxFQUF3Q0MsT0FBeEMsRUFBZ0Q7QUFDOUMsUUFBTUMsVUFBVSxHQUFHUCxRQUFRLENBQUNPLFVBQVQsQ0FBb0IsUUFBcEIsQ0FBbkI7QUFDQSxRQUFNQyxLQUFLLEdBQUc7QUFBRUosSUFBQUEsTUFBTSxFQUFFQSxNQUFWO0FBQWtCQyxJQUFBQSxJQUFJLEVBQUVBO0FBQXhCLEdBQWQ7QUFDQSxRQUFNSSxHQUFHLEdBQUc7QUFDVkwsSUFBQUEsTUFBTSxFQUFFQSxNQURFO0FBRVZDLElBQUFBLElBQUksRUFBRUEsSUFGSTtBQUdWSyxJQUFBQSxRQUFRLEVBQUVKO0FBSEEsR0FBWixDQUg4QyxDQVE5QztBQUNBOztBQUNBLFFBQU1LLEdBQUcsR0FBRyxNQUFNSixVQUFVLENBQUNLLFNBQVgsQ0FBcUJKLEtBQXJCLEVBQTRCO0FBQUVLLElBQUFBLElBQUksRUFBRUo7QUFBUixHQUE1QixFQUEyQztBQUFDSyxJQUFBQSxNQUFNLEVBQUU7QUFBVCxHQUEzQyxDQUFsQjtBQUNBLFNBQU9ILEdBQVA7QUFDRDs7QUFFRCxlQUFlSSxVQUFmLENBQTBCWCxNQUExQixFQUFrQ0MsSUFBbEMsRUFBdUM7QUFDckMsUUFBTUUsVUFBVSxHQUFHUCxRQUFRLENBQUNPLFVBQVQsQ0FBb0IsUUFBcEIsQ0FBbkI7QUFFQSxRQUFNQyxLQUFLLEdBQUc7QUFBQ0osSUFBQUEsTUFBTSxFQUFFQSxNQUFUO0FBQWlCQyxJQUFBQSxJQUFJLEVBQUVBO0FBQXZCLEdBQWQ7QUFDQSxRQUFNTSxHQUFHLEdBQUcsTUFBTUosVUFBVSxDQUFDUyxPQUFYLENBQW1CUixLQUFuQixDQUFsQjtBQUVBLFNBQU9HLEdBQVA7QUFDRDs7QUFFRCxlQUFlTSxXQUFmLENBQTJCQyxLQUEzQixFQUFpQztBQUMvQixRQUFNWCxVQUFVLEdBQUdQLFFBQVEsQ0FBQ08sVUFBVCxDQUFvQixRQUFwQixDQUFuQjtBQUVBLFFBQU1ZLFFBQVEsR0FBRyxNQUFNWixVQUFVLENBQUNhLElBQVgsQ0FBZ0I7QUFBQ2hCLElBQUFBLE1BQU0sRUFBRWM7QUFBVCxHQUFoQixFQUFpQ0csT0FBakMsRUFBdkI7QUFDQSxTQUFPRixRQUFQO0FBQ0Q7O0FBRUQsZUFBZUcsYUFBZixHQUE4QjtBQUM1QnRCLEVBQUFBLFFBQVEsQ0FBQ3VCLE9BQVQsQ0FBaUIsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDOUIsUUFBR0QsR0FBSCxFQUFPO0FBQ0xFLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSCxHQUFaO0FBQ0Q7O0FBQ0R4QixJQUFBQSxRQUFRLEdBQUd5QixJQUFJLENBQUNHLEVBQUwsQ0FBUSxTQUFSLENBQVg7QUFDRCxHQUxEO0FBTUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcmNpYW1hZ3VlcnJvc2tpL3dvcmtwbGFjZXMvaW5lNTY0Ni1hcHAtZGlhcmlvL3NlcnZpZG9yL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNT05HT19VUkwgfSBmcm9tICcuL2VudidcblxuLy8gdmVyc8OjbyBhbHRlcm5hdGl2YSB1c2FuZG8gYXN5bmMvYXdhaXQgLS0gUkVDT01FTkRBRE9cbmNvbnN0IHtNb25nb0NsaWVudH0gPSByZXF1aXJlKCdtb25nb2RiJylcbnZhciBEQkRyaXZlciA9IG5ldyBNb25nb0NsaWVudChNT05HT19VUkwsIHt1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWV9KVxuXG4vLyBkZWNsYXJhbW9zIGZ1bsOnw7VlcyBhc3PDrW5jcm9uYXMgY29tIGFzeW5jIFxuLy8gdG9rZW4gw6kgbyBpZGVudGlmaWNhZG9yIGRvIHVzdcOhcmlvXG5hc3luYyBmdW5jdGlvbiBhZGRFbnRyYWRhKHVzZXJJZCwgZGF0YSwgZW50cmFkYSl7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBEQkRyaXZlci5jb2xsZWN0aW9uKCdkaWFyaW8nKVxuICBjb25zdCBxdWVyeSA9IHsgdXNlcklkOiB1c2VySWQsIGRhdGE6IGRhdGEgfVxuICBjb25zdCBkb2MgPSB7XG4gICAgdXNlcklkOiB1c2VySWQsXG4gICAgZGF0YTogZGF0YSxcbiAgICBjb250ZXVkbzogZW50cmFkYVxuICB9XG4gIC8vIHRvZGEgcHJvbWlzZSDDqSBwcmVjZWRpZGEgZGUgdW0gYXdhaXQgLSBibG9xdWVpYSBhIGV4ZWN1w6fDo28gZGVzc2EgZnVuw6fDo28gYXTDqSBzZXIgY29tcGxldGFkYVxuICAvLyB1cHNlcnQgPSB1cGRhdGUgb3UgaW5zZXJ0XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKHF1ZXJ5LCB7ICRzZXQ6IGRvYyB9LCB7dXBzZXJ0OiB0cnVlfSkgIFxuICByZXR1cm4gcmVzXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEVudHJhZGEodXNlcklkLCBkYXRhKXtcbiAgY29uc3QgY29sbGVjdGlvbiA9IERCRHJpdmVyLmNvbGxlY3Rpb24oJ2RpYXJpbycpXG5cbiAgY29uc3QgcXVlcnkgPSB7dXNlcklkOiB1c2VySWQsIGRhdGE6IGRhdGF9XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZShxdWVyeSkgXG4gICBcbiAgcmV0dXJuIHJlc1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRFbnRyYWRhcyhlbWFpbCl7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBEQkRyaXZlci5jb2xsZWN0aW9uKCdkaWFyaW8nKVxuXG4gIGNvbnN0IGVudHJhZGFzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHt1c2VySWQ6IGVtYWlsfSkudG9BcnJheSgpXG4gIHJldHVybiBlbnRyYWRhc1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZXR1cEJERHJpdmVyKCl7XG4gIERCRHJpdmVyLmNvbm5lY3QoKGVyciwgY29ubikgPT4ge1xuICAgIGlmKGVycil7XG4gICAgICBjb25zb2xlLmRpcihlcnIpXG4gICAgfVxuICAgIERCRHJpdmVyID0gY29ubi5kYignSU5FNTY0NicpXG4gIH0pXG59XG5cbmV4cG9ydCB7c2V0dXBCRERyaXZlciwgZ2V0RW50cmFkYXMsIGdldEVudHJhZGEsIGFkZEVudHJhZGF9XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "mongodb.js"
      ],
      "names": [
        "MongoClient",
        "require",
        "DBDriver",
        "MONGO_URL",
        "useUnifiedTopology",
        "addEntrada",
        "userId",
        "data",
        "entrada",
        "collection",
        "query",
        "doc",
        "conteudo",
        "res",
        "updateOne",
        "$set",
        "upsert",
        "getEntrada",
        "findOne",
        "getEntradas",
        "email",
        "entradas",
        "find",
        "toArray",
        "setupBDDriver",
        "connect",
        "err",
        "conn",
        "console",
        "dir",
        "db"
      ],
      "mappings": ";;;;;;;;;;AAAA;;AAEA;AACA,MAAM;AAACA,EAAAA;AAAD,IAAgBC,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAIC,QAAQ,GAAG,IAAIF,WAAJ,CAAgBG,cAAhB,EAA2B;AAACC,EAAAA,kBAAkB,EAAE;AAArB,CAA3B,CAAf,C,CAEA;AACA;;AACA,eAAeC,UAAf,CAA0BC,MAA1B,EAAkCC,IAAlC,EAAwCC,OAAxC,EAAgD;AAC9C,QAAMC,UAAU,GAAGP,QAAQ,CAACO,UAAT,CAAoB,QAApB,CAAnB;AACA,QAAMC,KAAK,GAAG;AAAEJ,IAAAA,MAAM,EAAEA,MAAV;AAAkBC,IAAAA,IAAI,EAAEA;AAAxB,GAAd;AACA,QAAMI,GAAG,GAAG;AACVL,IAAAA,MAAM,EAAEA,MADE;AAEVC,IAAAA,IAAI,EAAEA,IAFI;AAGVK,IAAAA,QAAQ,EAAEJ;AAHA,GAAZ,CAH8C,CAQ9C;AACA;;AACA,QAAMK,GAAG,GAAG,MAAMJ,UAAU,CAACK,SAAX,CAAqBJ,KAArB,EAA4B;AAAEK,IAAAA,IAAI,EAAEJ;AAAR,GAA5B,EAA2C;AAACK,IAAAA,MAAM,EAAE;AAAT,GAA3C,CAAlB;AACA,SAAOH,GAAP;AACD;;AAED,eAAeI,UAAf,CAA0BX,MAA1B,EAAkCC,IAAlC,EAAuC;AACrC,QAAME,UAAU,GAAGP,QAAQ,CAACO,UAAT,CAAoB,QAApB,CAAnB;AAEA,QAAMC,KAAK,GAAG;AAACJ,IAAAA,MAAM,EAAEA,MAAT;AAAiBC,IAAAA,IAAI,EAAEA;AAAvB,GAAd;AACA,QAAMM,GAAG,GAAG,MAAMJ,UAAU,CAACS,OAAX,CAAmBR,KAAnB,CAAlB;AAEA,SAAOG,GAAP;AACD;;AAED,eAAeM,WAAf,CAA2BC,KAA3B,EAAiC;AAC/B,QAAMX,UAAU,GAAGP,QAAQ,CAACO,UAAT,CAAoB,QAApB,CAAnB;AAEA,QAAMY,QAAQ,GAAG,MAAMZ,UAAU,CAACa,IAAX,CAAgB;AAAChB,IAAAA,MAAM,EAAEc;AAAT,GAAhB,EAAiCG,OAAjC,EAAvB;AACA,SAAOF,QAAP;AACD;;AAED,eAAeG,aAAf,GAA8B;AAC5BtB,EAAAA,QAAQ,CAACuB,OAAT,CAAiB,CAACC,GAAD,EAAMC,IAAN,KAAe;AAC9B,QAAGD,GAAH,EAAO;AACLE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD;;AACDxB,IAAAA,QAAQ,GAAGyB,IAAI,CAACG,EAAL,CAAQ,SAAR,CAAX;AACD,GALD;AAMD",
      "sourceRoot": "/Users/merciamaguerroski/workplaces/ine5646-app-diario/servidor/src/",
      "sourcesContent": [
        "import { MONGO_URL } from './env'\n\n// versão alternativa usando async/await -- RECOMENDADO\nconst {MongoClient} = require('mongodb')\nvar DBDriver = new MongoClient(MONGO_URL, {useUnifiedTopology: true})\n\n// declaramos funções assíncronas com async \n// token é o identificador do usuário\nasync function addEntrada(userId, data, entrada){\n  const collection = DBDriver.collection('diario')\n  const query = { userId: userId, data: data }\n  const doc = {\n    userId: userId,\n    data: data,\n    conteudo: entrada\n  }\n  // toda promise é precedida de um await - bloqueia a execução dessa função até ser completada\n  // upsert = update ou insert\n  const res = await collection.updateOne(query, { $set: doc }, {upsert: true})  \n  return res\n}\n\nasync function getEntrada(userId, data){\n  const collection = DBDriver.collection('diario')\n\n  const query = {userId: userId, data: data}\n  const res = await collection.findOne(query) \n   \n  return res\n}\n\nasync function getEntradas(email){\n  const collection = DBDriver.collection('diario')\n\n  const entradas = await collection.find({userId: email}).toArray()\n  return entradas\n}\n\nasync function setupBDDriver(){\n  DBDriver.connect((err, conn) => {\n    if(err){\n      console.dir(err)\n    }\n    DBDriver = conn.db('INE5646')\n  })\n}\n\nexport {setupBDDriver, getEntradas, getEntrada, addEntrada}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1605996705467
  }
}